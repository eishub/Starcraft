main module{
	beliefs{
		trainSCV.
	}
	program{
		if bel(percept(unit("Terran SCV",X)),X<20) then train("Terran SCV").
		%if bel(supply(C, M), (M - C) =< 2, percept(friendly(_ , "Terran SCV", Id, _, _, _, _))) then (Id).send(build("Terran Supply Depot")).
	}
	actionspec {	
		move(X, Y){
			pre{true}
			post{true}	
		}
		
		train(Id) {
			pre {trainSCV}
			post {not(trainSCV)}
		}
		
		lift{
			pre{true}
			post{true}	
		}
		
		buildAddon(X){
			pre{true}
			post{true}	
		}
		
		land(X,Y){
			pre{true}
			post{true}	
		}
	}
}

event module {
	program {
		forall bel(received(Sender, scv(Name, Id))) do insert(scv(Name, Id)).
		
		if bel(not(trainSCV), percept(queueSize(N)), N < 2, percept(minerals(X)),X>=50,percept(supply(Y,Z)),Y<Z) then insert(trainSCV).
		
		if bel(percept(supply(C,Max)), supply(OC, OMax)) then delete(supply(OC, OMax)) + insert(supply(C,Max)).
		
		if bel(not(done), scv(Name, Id), percept(friendly(_ ,"Terran SCV",Id,_ ,_ ,_ ,_ ,_ ,_ ))) then (Name).sendonce(builder) + insert(done).
		
		if bel(done, scv(Name, Id), not(percept(friendly(_ ,"Terran SCV",Id,_ ,_ ,_ ,_ ,_ ,_ )))) then delete(done).
	}	
}
